<!DOCTYPE html>
<html lang="es">

<head>
    <%- include('partials/head.ejs') %>
</head>

<body>
    <header>
    <%- include('partials/header.ejs') %>
    </header>
    
    <main>       
        <section class="section-crear-producto">

            <h2 class="section-crear-producto-encabezado titulares-secundarios">Publicar Obra</h2>

            <form action="/galeria/crear_producto/" id="crear-producto-form" method="POST" enctype="multipart/form-data">

                <div class="crear-producto">
                    <label for="nombre">Nombre de la obra</label>
                    <input type="text" name="nombre" class="crear-producto-field <%= locals.errors && errors.nombre ? 'is-invalid' : null %>" value="<%= locals.old && old.nombre ? old.nombre : '' %>">
                    <% if (locals.errors && errors.nombre) { %>
                        <p class="error-message"><%=errors.nombre.msg%></p>
                    <% } %> 
                </div>

                <div class="crear-producto">
                    <label for="artista">Artista</label>
                    <input type="text" name="artista" class="crear-producto-field <%= locals.errors && errors.artista ? 'is-invalid' : null %>"  value="<%= locals.old && old.artista ? old.artista : '' %>">
                    <% if (locals.errors && errors.artista) { %>
                        <p class="error-message"><%=errors.artista.msg%></p>
                    <% } %> 
                </div>
                
                <div class="crear-producto">
                    <label for="fecha-creacion">Año de Creación</label>
                    <input type="text" name="year" class="crear-producto-field <%= locals.errors && errors.year ? 'is-invalid' : null %>"  value="<%= locals.old && old.year ? old.year : '' %>">
                    <% if (locals.errors && errors.year) { %>
                        <p class="error-message"><%=errors.year.msg%></p>
                    <% } %>  
                </div>
 
                               
                <div class="crear-producto">
                    <label for="medio">Medio</label>
                    <select name="medio" class="crear-producto-field <%= locals.errors && errors.medio ? 'is-invalid' : null %>">
                        <% for (let unMedio of medios) { %>
                            <option 
                                value="<%= unMedio.id %>"
                                <%= locals.old &&  (unMedio.id === old.medio) ? 'selected' : null %> >
                                <%= unMedio.nombre %> 
                            </option>
                        <% } %>
                           
                         
                    </select>
                    <% if (locals.errors && errors.medio) { %>
                        <p class="error-message"><%=errors.medio.msg%></p>
                    <% } %> 
                </div>

                <div class="crear-producto">
                    <label for="categoria">Temática</label>
                    <select name="categoria" class="crear-producto-field <%= locals.errors && errors.categoria ? 'is-invalid' : null %>" >
                        <% for(let unaCategoria of categorias) { %>
                            <option 
                            value="<%= unaCategoria.id %>"
                            <%= locals.old && (unaCategoria.id === old.categoria) ? 'selected' : null %> 
                        > <%= unaCategoria.nombre %> </option>
                        <% } %>
                        
                    </select>
                    <% if (locals.errors && errors.categoria) { %>
                        <p class="error-message"><%=errors.categoria.msg%></p>
                    <% } %> 
                </div>



                <div class="crear-producto crear-producto-dimensiones">
                    
                    <h3 class="crear-producto-titulos-secuendarios">Dimensiones  <span>(centímetros)</span></h3>
                    
                    <div class="crear-producto-dimensiones-obejeto">
                        <label for="ancho">ancho</label>
                        <input type="number" name="ancho" class="crear-producto-field <%= locals.errors && errors.ancho ? 'is-invalid' : null %>" value="<%= locals.old && old.ancho ? old.ancho : '' %>">
                        <% if (locals.errors && errors.ancho) { %>
                            <p class="error-message"><%=errors.ancho.msg%></p>
                        <% } %>  
                    </div>
                    <div lass="crear-producto-dimensiones-obejeto">
                        <label for="alto">alto</label>
                        <input type="number" name="alto" class="crear-producto-field <%= locals.errors && errors.alto ? 'is-invalid' : null %>" value="<%= locals.old && old.alto ? old.alto : '' %>">
                        <% if (locals.errors && errors.alto) { %>
                            <p class="error-message"><%=errors.alto.msg%></p>
                        <% } %>  
                    </div>
                </div>

                <div class="crear-producto crear-producto-descripcion">
                    
                    <label for="descripcion">Descripción de la obra</label>
                    <textarea name="descripcion" class="crear-producto-field <%= locals.errors && errors.descripcion ? 'is-invalid' : null %>"><%= locals.old && old.descripcion ? old.descripcion : '' %></textarea>
                    <% if (locals.errors && errors.descripcion) { %>
                        <p class="error-message"><%=errors.descripcion.msg%></p>
                    <% } %> 

                </div>

                <div class="crear-producto crear-producto-descripcion">
                    <label for="otros_detalles">Otros detalles</label>
                    <textarea name="otros_detalles" class="crear-producto-field <%= locals.errors && errors.otros_detalles ? 'is-invalid' : null %>" placeholder="Ej: Enmarcado, soporte, peso"><%= locals.old && old.otros_detalles ? old.otros_detalles : '' %></textarea>
                    <% if (locals.errors && errors.otros_detalles) { %>
                        <p class="error-message"><%=errors.otros_detalles.msg%></p>
                    <% } %> 

                </div>



                <div class="crear-producto crear-producto-fotos">
                    <label for="fotos">Imágenes de la obra</label>
                    <input type="file" name="fotos" class="crear-producto-field <%= locals.errors && errors.fotos ? 'is-invalid' : null %>" >
                    <% if (locals.errors && errors.fotos) { %>
                        <p class="error-message"><%=errors.fotos.msg%></p>
                    <% } %>
                </div>

                <div class="crear-producto crear-producto-precio">
                    <label for="precio">Precio de la obra</label>
                    <input type="number" name="precio" class="crear-producto-field <%= locals.errors && errors.precio ? 'is-invalid' : null %>" value="<%= locals.old && old.precio ? old.precio : '' %>">
                    <% if (locals.errors && errors.precio) { %>
                        <p class="error-message"><%=errors.precio.msg%></p>
                    <% } %>
                </div>

                <div class="crear-producto crear-producto-precio">
                    <label for="descuento">Descuento</label>
                    <input type="number" name="descuento" class="crear-producto-field <%= locals.errors && errors.descuento ? 'is-invalid' : null %>" value="<%= locals.old && old.descuento ? old.descuento : '' %>">
                    <% if (locals.errors && errors.descuento) { %>
                        <p class="error-message"><%=errors.descuento.msg%></p>
                    <% } %>
                </div>


                <div class="crear-producto crear-producto-botonera">
                    <input type="submit" class="crear-producto-field" id="boton-subir-obra" value="Subir obra">
                    <input type="reset" class="crear-producto-field" id="boton-reset-form"value="Resetear formulario">
                </div>
            </form>
            
        </section> 

    </main>  
    
    <footer>
        <%- include('partials/footer') %>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

</body>
</html>